function onImageSubmit(e) {
    e.preventDefault(); //Prevent the browser executing the default action

    // This message section remains invisible until an API error message is returned.
    document.querySelector('.msg').textContent = '';

    // Acquire user input values from the form.
    var genre = document.querySelector('input[name="genre"]:checked').value;
    var mood = document.querySelector('input[name="mood"]:checked').value;
    var time = document.querySelector('input[name="time"]:checked').value;

    // Prompt was initially meant to be generated by GPT but here is a template I came up with for the time being.
    const prompt = "generate a DALL-E2 prompt for a " + genre + " " + mood + " " + time + " album, cinematic still, shot on film";
    const size = 'medium'; // Hardcoded to be medium for cost effectiveness.
  
    if (prompt === '') { // Error handling for empty prompts, so that no API requests are made. Deprecated due to the usage of a form with options as opposed to text input.
      alert('Please add some text');
      return;
    }

    generateImageRequest(prompt, size);
}

async function generateImageRequest(prompt, size) {
  try {
    const response = await fetch('/openai/generateimage', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({
        prompt,
        size,
      }),
    });

    if (!response.ok) {
      throw new Error('The image could not be generated.');
    }

    const data = await response.json();
    console.log(data);

    const imageUrl = data.data;

    document.querySelector('#image').src = imageUrl;
    document.getElementById('bg-image').style.backgroundImage = "url('" + imageUrl + "')";
  } catch (error) {
    document.querySelector('.msg').textContent = error;
  }
}